### Variables
@baseUrl = http://localhost:8080
@currentUser = u-johndoe

### ==========================================
### USERS (seeded: u1-u5)
### ==========================================

### Get alex_dev (tech enthusiast, has 2 chats)
GET {{baseUrl}}/users/u1

### Get maria_chen (health/lifestyle)
GET {{baseUrl}}/users/u2

### Get john_doe (finance/career)
GET {{baseUrl}}/users/u3

### Get sarah_k (relationships/fun)
GET {{baseUrl}}/users/u4

### Get dev_master (tech/education)
GET {{baseUrl}}/users/u5

### Create new user
POST {{baseUrl}}/users
Content-Type: application/json

{
  "username": "new_user",
  "interests": ["tech", "finance"],
  "settings": {
    "allowDMs": true,
    "allowTagging": true
  }
}

### Current user follows sarah_k (u4)
POST {{baseUrl}}/me/follow/u4
X-User-ID: {{currentUser}}

### ==========================================
### POSTS (seeded: p1-p7)
### ==========================================

### Get p1: "How do I switch from frontend to backend?" by alex_dev
GET {{baseUrl}}/posts/p1

### Get p2: "Morning routine for staying productive" by maria_chen
GET {{baseUrl}}/posts/p2

### Get p3: POLL "Which frontend framework?" by dev_master
GET {{baseUrl}}/posts/p3

### Get p4: "Just landed my first remote job!" by john_doe
GET {{baseUrl}}/posts/p4

### Get p5: "Disagreements with partner about finances" by sarah_k
GET {{baseUrl}}/posts/p5

### Get p6: "Best resources for learning Go?" by alex_dev
GET {{baseUrl}}/posts/p6

### Get p7: POLL "Hours of sleep?" by maria_chen
GET {{baseUrl}}/posts/p7

### Create text post (author from X-User-ID header)
POST {{baseUrl}}/posts
Content-Type: application/json
X-User-ID: {{currentUser}}

{
  "postType": "text",
  "text": "What's the best way to learn system design?",
  "aiRaw": {
    "category": "education",
    "intent": "asking-question",
    "depth": "serious",
    "tags": ["system design", "learning"],
    "confidence": 0.89,
    "risk": "low",
    "flags": []
  }
}

### Create poll post (author from X-User-ID header)
POST {{baseUrl}}/posts/poll
Content-Type: application/json
X-User-ID: {{currentUser}}

{
  "postType": "poll",
  "text": "What's your preferred code editor?",
  "pollOptions": ["VS Code", "Neovim", "JetBrains", "Sublime"],
  "aiRaw": {
    "category": "tech",
    "intent": "seeking-opinion",
    "depth": "casual",
    "tags": ["developer tools", "productivity"],
    "confidence": 0.92,
    "risk": "low",
    "flags": []
  }
}

### Respond to p6 (Go learning question) - user from header
POST {{baseUrl}}/posts/p6/respond
Content-Type: application/json
X-User-ID: {{currentUser}}

{
  "text": "The official Go tour is great, plus Ardan Labs courses!",
  "chatType": "direct"
}

### Vote on p7 (sleep poll) - user from header
POST {{baseUrl}}/posts/p7/vote
Content-Type: application/json
X-User-ID: {{currentUser}}

{
  "option": "7-8 hours"
}

### ==========================================
### CHATS (seeded: c1-c3)
### ==========================================

### Get current user's chats
GET {{baseUrl}}/me/chats?limit=20
X-User-ID: {{currentUser}}

### Get alex_dev's chats (as u1)
GET {{baseUrl}}/me/chats?limit=20
X-User-ID: u1

### Get maria_chen's chats (as u2)
GET {{baseUrl}}/me/chats?limit=20
X-User-ID: u2

### Get john_doe's chats (as u3)
GET {{baseUrl}}/me/chats?limit=20
X-User-ID: u3

### Get c1: chat about "frontend to backend" (alex_dev + john_doe)
GET {{baseUrl}}/chats/c1

### Get c2: chat about "morning routine" (maria_chen + dev_master)
GET {{baseUrl}}/chats/c2

### Get c3: chat about "remote job success" (john_doe + alex_dev)
GET {{baseUrl}}/chats/c3

### Get c1 participants
GET {{baseUrl}}/chats/c1/participants

### Send message in c1 (sender from header)
POST {{baseUrl}}/chats/c1/message
Content-Type: application/json
X-User-ID: {{currentUser}}

{
  "text": "That's helpful! I'll start with building a REST API in Go."
}

### alex_dev sends message in c1
POST {{baseUrl}}/chats/c1/message
Content-Type: application/json
X-User-ID: u1

{
  "text": "That's helpful! I'll start with building a REST API in Go."
}

### john_doe sends message in c1
POST {{baseUrl}}/chats/c1/message
Content-Type: application/json
X-User-ID: u3

{
  "text": "Great choice! Let me know if you need any resources."
}

### Mute chat c1 (user from header)
POST {{baseUrl}}/chats/c1/mute
X-User-ID: {{currentUser}}

### ==========================================
### FEED
### ==========================================

### Get feed for current user
GET {{baseUrl}}/me/feed?limit=20
X-User-ID: {{currentUser}}

### Get feed for alex_dev (interests: tech, career)
GET {{baseUrl}}/me/feed?limit=20
X-User-ID: u1

### Get feed for maria_chen (interests: health, lifestyle)
GET {{baseUrl}}/me/feed?limit=20
X-User-ID: u2

### Get feed for sarah_k (interests: relationships, fun)
GET {{baseUrl}}/me/feed?limit=20
X-User-ID: u4

### Get feed with tech category filter
GET {{baseUrl}}/me/feed?limit=10&category=tech
X-User-ID: u1

### Get feed with career category filter
GET {{baseUrl}}/me/feed?limit=10&category=career
X-User-ID: u1

### Get feed with casual depth filter
GET {{baseUrl}}/me/feed?limit=10&depth=casual
X-User-ID: u1

### Get feed with serious depth filter
GET {{baseUrl}}/me/feed?limit=10&depth=serious
X-User-ID: u1

### ==========================================
### TAGS (seeded: 10 tags)
### ==========================================

### Get career-change tag
GET {{baseUrl}}/tags/career-change

### Get backend-dev tag
GET {{baseUrl}}/tags/backend-dev

### Get remote-work tag (most used: 25)
GET {{baseUrl}}/tags/remote-work

### Get learning tag
GET {{baseUrl}}/tags/learning

### List all tags (sorted by usage)
GET {{baseUrl}}/tags?limit=20

### Search tags for "remote"
GET {{baseUrl}}/tags?q=remote&limit=10

### Search tags for "dev"
GET {{baseUrl}}/tags?q=dev&limit=10

### Search tags for "health"
GET {{baseUrl}}/tags?q=health&limit=10
